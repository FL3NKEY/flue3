# Сборка и деплой

Для сборки приложения **flue3** предоставляет команду `build`.

`package.json`
```json
{
    "scripts": {
        "build": "flue3 build"
    }
}
```

```
npm run build
```

Результат сборки приложения будет хранится в директории `dist`. Имя этой директории можно поменять в файле конфигурации параметром [outputPath](/guide/config#outputpath) 

## SSR

В режиме SSR результатом сборки будет две директории: `client` для клиентского окружения и `server` для серверного окружения.

```
.
├─ dist
│  ├─ client
│  │  ├─ public
│  │  └─ ...
│  ├─ server
│  │  ├─ server.mjs
│  │  └─ ...

```

Все пакеты, которые были импортированы в серверный бандл (например из `node_modules`) будут в любом случае транспилированы и попадут в итоговый бандл, таким образом вам не нужно за собой тащить отдельно `node_modules` и приложение будет существовать самостоятельно.

Для запуска приложения, нужно выполнить `server.mjs` файл, который создаст HTTP сервер, будет принимать запросы и раздавать статику.

```
node dist/server/server.mjs
```

## SPA

В режиме SPA результатом сборки будет центральный `index.html` файл и директория со статикой `public`.

```
.
├─ dist
│  ├─ public
│  └─ index.html

```

Ваш HTTP сервер должен по корневому пути отдавать файлы из директории `public`. Но если статический файл не найден, то отдавать `index.html`, сохраняя текущий путь.
